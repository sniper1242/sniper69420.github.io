var __extends=(this&&this.__extends)||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d;}
__.prototype=b.prototype;d.prototype=new __();};var GameStartr;(function(GameStartr_1){"use strict";var GameStartr=(function(_super){__extends(GameStartr,_super);function GameStartr(settings){if(settings===void 0){settings={};}
_super.call(this,{"unitsize":settings.unitsize,"constantsSource":settings.constantsSource,"constants":settings.constants});this.resets=["resetObjectMaker","resetPixelRender","resetTimeHandler","resetItemsHolder","resetAudioPlayer","resetQuadsKeeper","resetGamesRunner","resetGroupHolder","resetThingHitter","resetMapScreener","resetPixelDrawer","resetNumberMaker","resetMapsCreator","resetMapsHandler","resetInputWriter","resetDeviceLayer","resetTouchPasser","resetLevelEditor","resetWorldSeeder","resetScenePlayer","resetMathDecider","resetModAttacher","startModAttacher","resetContainer"];if(settings.extraResets){this.resets.push.apply(this.resets,settings.extraResets);}
if(settings.resetTimed){this.resetTimed(this,settings);}
else{this.reset(this,settings);}}
GameStartr.prototype.reset=function(GameStarter,settings){_super.prototype.reset.call(this,GameStarter,GameStarter.resets,settings);};GameStartr.prototype.resetTimed=function(GameStarter,settings){_super.prototype.resetTimed.call(this,GameStarter,GameStarter.resets,settings);};GameStartr.prototype.resetObjectMaker=function(GameStarter,settings){GameStarter.ObjectMaker=new ObjectMakr.ObjectMakr(GameStarter.proliferate({"properties":{"Quadrant":{"EightBitter":GameStarter,"GameStarter":GameStarter},"Thing":{"EightBitter":GameStarter,"GameStarter":GameStarter}}},GameStarter.settings.objects));};GameStartr.prototype.resetQuadsKeeper=function(GameStarter,settings){var quadrantWidth=settings.width/(GameStarter.settings.quadrants.numCols-3),quadrantHeight=settings.height/(GameStarter.settings.quadrants.numRows-2);GameStarter.QuadsKeeper=new QuadsKeepr.QuadsKeepr(GameStarter.proliferate({"ObjectMaker":GameStarter.ObjectMaker,"createCanvas":GameStarter.createCanvas,"quadrantWidth":quadrantWidth,"quadrantHeight":quadrantHeight,"startLeft":-quadrantWidth,"startHeight":-quadrantHeight,"onAdd":GameStarter.onAreaSpawn.bind(GameStarter,GameStarter),"onRemove":GameStarter.onAreaUnspawn.bind(GameStarter,GameStarter)},GameStarter.settings.quadrants));};GameStartr.prototype.resetPixelRender=function(GameStarter,settings){GameStarter.PixelRender=new PixelRendr.PixelRendr(GameStarter.proliferate({"scale":GameStarter.scale,"QuadsKeeper":GameStarter.QuadsKeeper,"unitsize":GameStarter.unitsize},GameStarter.settings.sprites));};GameStartr.prototype.resetPixelDrawer=function(GameStarter,settings){GameStarter.PixelDrawer=new PixelDrawr.PixelDrawr(GameStarter.proliferate({"PixelRender":GameStarter.PixelRender,"MapScreener":GameStarter.MapScreener,"createCanvas":GameStarter.createCanvas,"unitsize":GameStarter.unitsize,"generateObjectKey":GameStarter.generateObjectKey},GameStarter.settings.renderer));};GameStartr.prototype.resetTimeHandler=function(GameStarter,settings){GameStarter.TimeHandler=new TimeHandlr.TimeHandlr(GameStarter.proliferate({"classAdd":GameStarter.addClass,"classRemove":GameStarter.removeClass},GameStarter.settings.events));};GameStartr.prototype.resetAudioPlayer=function(GameStarter,settings){GameStarter.AudioPlayer=new AudioPlayr.AudioPlayr(GameStarter.proliferate({"ItemsHolder":GameStarter.ItemsHolder},GameStarter.settings.audio));};GameStartr.prototype.resetGamesRunner=function(GameStarter,settings){GameStarter.GamesRunner=new GamesRunnr.GamesRunnr(GameStarter.proliferate({"adjustFramerate":true,"interval":1000/60,"scope":GameStarter,"onPlay":GameStarter.onGamePlay.bind(GameStarter,GameStarter),"onPause":GameStarter.onGamePause.bind(GameStarter,GameStarter),"FPSAnalyzer":new FPSAnalyzr.FPSAnalyzr()},GameStarter.settings.runner));};GameStartr.prototype.resetItemsHolder=function(GameStarter,settings){GameStarter.ItemsHolder=new ItemsHoldr.ItemsHoldr(GameStarter.proliferate({"callbackArgs":[GameStarter]},GameStarter.settings.statistics));};GameStartr.prototype.resetGroupHolder=function(GameStarter,settings){GameStarter.GroupHolder=new GroupHoldr.GroupHoldr(GameStarter.settings.groups);};GameStartr.prototype.resetThingHitter=function(GameStarter,settings){GameStarter.ThingHitter=new ThingHittr.ThingHittr(GameStarter.proliferate({"scope":GameStarter},GameStarter.settings.collisions));};GameStartr.prototype.resetMapScreener=function(GameStarter,settings){GameStarter.MapScreener=new MapScreenr.MapScreenr({"EightBitter":GameStarter,"unitsize":GameStarter.unitsize,"width":settings.width,"height":settings.height,"variableArgs":[GameStarter],"variables":GameStarter.settings.maps.screenVariables});};GameStartr.prototype.resetNumberMaker=function(GameStarter,settings){GameStarter.NumberMaker=new NumberMakr.NumberMakr();};GameStartr.prototype.resetMapsCreator=function(GameStarter,settings){GameStarter.MapsCreator=new MapsCreatr.MapsCreatr({"ObjectMaker":GameStarter.ObjectMaker,"groupTypes":GameStarter.settings.maps.groupTypes,"macros":GameStarter.settings.maps.macros,"entrances":GameStarter.settings.maps.entrances,"maps":GameStarter.settings.maps.library,"scope":GameStarter});};GameStartr.prototype.resetMapsHandler=function(GameStarter,settings){GameStarter.MapsHandler=new MapsHandlr.MapsHandlr({"MapsCreator":GameStarter.MapsCreator,"MapScreener":GameStarter.MapScreener,"screenAttributes":GameStarter.settings.maps.screenAttributes,"onSpawn":GameStarter.settings.maps.onSpawn,"onUnspawn":GameStarter.settings.maps.onUnspawn});};GameStartr.prototype.resetInputWriter=function(GameStarter,settings){GameStarter.InputWriter=new InputWritr.InputWritr(GameStarter.proliferate({"canTrigger":GameStarter.canInputsTrigger.bind(GameStarter,GameStarter),"eventInformation":GameStarter},GameStarter.settings.input.InputWritrArgs));};GameStartr.prototype.resetDeviceLayer=function(GameStarter,settings){GameStarter.DeviceLayer=new DeviceLayr.DeviceLayr(GameStarter.proliferate({"InputWriter":GameStarter.InputWriter},GameStarter.settings.devices));};GameStartr.prototype.resetTouchPasser=function(GameStarter,settings){GameStarter.TouchPasser=new TouchPassr.TouchPassr(GameStarter.proliferate({"InputWriter":GameStarter.InputWriter},GameStarter.settings.touch));};GameStartr.prototype.resetLevelEditor=function(GameStarter,settings){GameStarter.LevelEditor=new LevelEditr.LevelEditr(GameStarter.proliferate({"GameStarter":GameStarter,"beautifier":js_beautify},GameStarter.settings.editor));};GameStartr.prototype.resetWorldSeeder=function(GameStarter,settings){GameStarter.WorldSeeder=new WorldSeedr.WorldSeedr(GameStarter.proliferate({"random":GameStarter.NumberMaker.random.bind(GameStarter.NumberMaker),"onPlacement":GameStarter.mapPlaceRandomCommands.bind(GameStarter,GameStarter)},GameStarter.settings.generator));};GameStartr.prototype.resetScenePlayer=function(GameStarter,settings){GameStarter.ScenePlayer=new ScenePlayr.ScenePlayr(GameStarter.proliferate({"cutsceneArguments":[GameStarter]},GameStarter.settings.scenes));};GameStartr.prototype.resetMathDecider=function(GameStarter,settings){GameStarter.MathDecider=new MathDecidr.MathDecidr(GameStarter.settings.math);};GameStartr.prototype.resetModAttacher=function(GameStarter,settings){GameStarter.ModAttacher=new ModAttachr.ModAttachr(GameStarter.proliferate({"scopeDefault":GameStarter,"ItemsHoldr":GameStarter.ItemsHolder},GameStarter.settings.mods));};GameStartr.prototype.startModAttacher=function(GameStarter,settings){var mods=settings.mods,i;if(mods){for(i in mods){if(mods.hasOwnProperty(i)&&mods[i]){GameStarter.ModAttacher.enableMod(i);}}}
GameStarter.ModAttacher.fireEvent("onReady",GameStarter,GameStarter);};GameStartr.prototype.resetContainer=function(GameStarter,settings){GameStarter.container=GameStarter.createElement("div",{"className":"EightBitter","style":GameStarter.proliferate({"position":"relative","width":settings.width+"px","height":settings.height+"px"},settings.style)});GameStarter.canvas=GameStarter.createCanvas(settings.width,settings.height);GameStarter.PixelDrawer.setCanvas(GameStarter.canvas);GameStarter.container.appendChild(GameStarter.canvas);GameStarter.TouchPasser.setParentContainer(GameStarter.container);};GameStartr.prototype.scrollWindow=function(dx,dy){var GameStarter=GameStartr.prototype.ensureCorrectCaller(this);dx=dx|0;dy=dy|0;if(!dx&&!dy){return;}
GameStarter.MapScreener.shift(dx,dy);GameStarter.shiftAll(-dx,-dy);GameStarter.QuadsKeeper.shiftQuadrants(-dx,-dy);};GameStartr.prototype.scrollThing=function(thing,dx,dy){var saveleft=thing.left,savetop=thing.top;thing.GameStarter.scrollWindow(dx,dy);thing.GameStarter.setLeft(thing,saveleft);thing.GameStarter.setTop(thing,savetop);};GameStartr.prototype.onAreaSpawn=function(GameStarter,direction,top,right,bottom,left){GameStarter.MapsHandler.spawnMap(direction,(top+GameStarter.MapScreener.top)/GameStarter.unitsize,(right+GameStarter.MapScreener.left)/GameStarter.unitsize,(bottom+GameStarter.MapScreener.top)/GameStarter.unitsize,(left+GameStarter.MapScreener.left)/GameStarter.unitsize);};GameStartr.prototype.onAreaUnspawn=function(GameStarter,direction,top,right,bottom,left){GameStarter.MapsHandler.unspawnMap(direction,(top+GameStarter.MapScreener.top)/GameStarter.unitsize,(right+GameStarter.MapScreener.left)/GameStarter.unitsize,(bottom+GameStarter.MapScreener.top)/GameStarter.unitsize,(left+GameStarter.MapScreener.left)/GameStarter.unitsize);};GameStartr.prototype.addThing=function(thingRaw,left,top){if(left===void 0){left=0;}
if(top===void 0){top=0;}
var thing;if(typeof thingRaw==="string"||thingRaw instanceof String){thing=this.ObjectMaker.make(thingRaw);}
else if(thingRaw.constructor===Array){thing=this.ObjectMaker.make.apply(this.ObjectMaker,thingRaw);}
else{thing=thingRaw;}
if(arguments.length>2){thing.GameStarter.setLeft(thing,left);thing.GameStarter.setTop(thing,top);}
else if(arguments.length>1){thing.GameStarter.setLeft(thing,left);}
thing.GameStarter.updateSize(thing);thing.GameStarter.GroupHolder.getFunctions().add[thing.groupType](thing);thing.placed=true;if(thing.onThingAdd){thing.onThingAdd(thing);}
thing.GameStarter.PixelDrawer.setThingSprite(thing);if(thing.onThingAdded){thing.onThingAdded(thing);}
thing.GameStarter.ModAttacher.fireEvent("onAddThing",thing,left,top);return thing;};GameStartr.prototype.thingProcess=function(thing,title,settings,defaults){var maxQuads=4,num,cycle;thing.title=thing.title||title;if(thing.width&&!thing.spritewidth){thing.spritewidth=defaults.spritewidth||defaults.width;}
if(thing.height&&!thing.spriteheight){thing.spriteheight=defaults.spriteheight||defaults.height;}
num=Math.floor(thing.width*(thing.GameStarter.unitsize/thing.GameStarter.QuadsKeeper.getQuadrantWidth()));if(num>0){maxQuads+=((num+1)*maxQuads/2);}
num=Math.floor(thing.height*thing.GameStarter.unitsize/thing.GameStarter.QuadsKeeper.getQuadrantHeight());if(num>0){maxQuads+=((num+1)*maxQuads/2);}
thing.maxquads=maxQuads;thing.quadrants=new Array(maxQuads);thing.spritewidth=thing.spritewidth||thing.width;thing.spriteheight=thing.spriteheight||thing.height;thing.spritewidthpixels=thing.spritewidth*thing.GameStarter.unitsize;thing.spriteheightpixels=thing.spriteheight*thing.GameStarter.unitsize;thing.canvas=thing.GameStarter.createCanvas(thing.spritewidthpixels,thing.spriteheightpixels);thing.context=thing.canvas.getContext("2d");thing.imageData=thing.context.getImageData(0,0,thing.spritewidthpixels,thing.spriteheightpixels);if(thing.opacity!==1){thing.GameStarter.setOpacity(thing,thing.opacity);}
if(thing.attributes){thing.GameStarter.thingProcessAttributes(thing,thing.attributes);}
if(thing.onThingMake){thing.onThingMake(thing,settings);}
thing.GameStarter.setSize(thing,thing.width,thing.height);thing.GameStarter.setClassInitial(thing,thing.name||thing.title);if(thing.spriteCycle){cycle=thing.spriteCycle;thing.GameStarter.TimeHandler.addClassCycle(thing,cycle[0],cycle[1]||null,cycle[2]||null);}
if(cycle=thing.spriteCycleSynched){thing.GameStarter.TimeHandler.addClassCycleSynched(thing,cycle[0],cycle[1]||null,cycle[2]||null);}
if(thing.flipHoriz){thing.GameStarter.flipHoriz(thing);}
if(thing.flipVert){thing.GameStarter.flipVert(thing);}
thing.GameStarter.ModAttacher.fireEvent("onThingMake",thing.GameStarter,thing,title,settings,defaults);};GameStartr.prototype.thingProcessAttributes=function(thing,attributes){var attribute;for(attribute in attributes){if(thing[attribute]){thing.GameStarter.proliferate(thing,attributes[attribute]);if(thing.name){thing.name+=" "+attribute;}
else{thing.name=thing.title+" "+attribute;}}}};GameStartr.prototype.mapPlaceRandomCommands=function(GameStarter,generatedCommands){var MapsCreator=GameStarter.MapsCreator,MapsHandler=GameStarter.MapsHandler,prethings=MapsHandler.getPreThings(),area=MapsHandler.getArea(),map=MapsHandler.getMap(),command,output,i;for(i=0;i<generatedCommands.length;i+=1){command=generatedCommands[i];output={"thing":command.title,"x":command.left,"y":command.top};if(command.arguments){GameStarter.proliferateHard(output,command.arguments,true);}
MapsCreator.analyzePreSwitch(output,prethings,area,map);}};GameStartr.prototype.onGamePlay=function(GameStarter){GameStarter.AudioPlayer.resumeAll();GameStarter.ModAttacher.fireEvent("onGamePlay");};GameStartr.prototype.onGamePause=function(GameStarter){GameStarter.AudioPlayer.pauseAll();GameStarter.ModAttacher.fireEvent("onGamePause");};GameStartr.prototype.canInputsTrigger=function(GameStarter){return true;};GameStartr.prototype.gameStart=function(){this.ModAttacher.fireEvent("onGameStart");};GameStartr.prototype.killNormal=function(thing){if(!thing){return;}
thing.alive=false;thing.hidden=true;thing.movement=undefined;};GameStartr.prototype.markChanged=function(thing){thing.changed=true;};GameStartr.prototype.shiftVert=function(thing,dy,notChanged){EightBittr.EightBittr.prototype.shiftVert(thing,dy);if(!notChanged){thing.GameStarter.markChanged(thing);}};GameStartr.prototype.shiftHoriz=function(thing,dx,notChanged){EightBittr.EightBittr.prototype.shiftHoriz(thing,dx);if(!notChanged){thing.GameStarter.markChanged(thing);}};GameStartr.prototype.setTop=function(thing,top){EightBittr.EightBittr.prototype.setTop(thing,top);thing.GameStarter.markChanged(thing);};GameStartr.prototype.setRight=function(thing,right){EightBittr.EightBittr.prototype.setRight(thing,right);thing.GameStarter.markChanged(thing);};GameStartr.prototype.setBottom=function(thing,bottom){EightBittr.EightBittr.prototype.setBottom(thing,bottom);thing.GameStarter.markChanged(thing);};GameStartr.prototype.setLeft=function(thing,left){EightBittr.EightBittr.prototype.setLeft(thing,left);thing.GameStarter.markChanged(thing);};GameStartr.prototype.shiftBoth=function(thing,dx,dy,notChanged){dx=dx||0;dy=dy||0;if(!thing.noshiftx){if(thing.parallaxHoriz){thing.GameStarter.shiftHoriz(thing,thing.parallaxHoriz*dx,notChanged);}
else{thing.GameStarter.shiftHoriz(thing,dx,notChanged);}}
if(!thing.noshifty){if(thing.parallaxVert){thing.GameStarter.shiftVert(thing,thing.parallaxVert*dy,notChanged);}
else{thing.GameStarter.shiftVert(thing,dy,notChanged);}}};GameStartr.prototype.shiftThings=function(things,dx,dy,notChanged){for(var i=things.length-1;i>=0;i-=1){things[i].GameStarter.shiftBoth(things[i],dx,dy,notChanged);}};GameStartr.prototype.shiftAll=function(dx,dy){var GameStarter=GameStartr.prototype.ensureCorrectCaller(this);GameStarter.GroupHolder.callAll(GameStarter,GameStarter.shiftThings,dx,dy,true);};GameStartr.prototype.setWidth=function(thing,width,updateSprite,updateSize){thing.width=width;thing.unitwidth=width*thing.GameStarter.unitsize;if(updateSprite){thing.spritewidth=width;thing.spritewidthpixels=width*thing.GameStarter.unitsize;}
if(updateSize){thing.GameStarter.updateSize(thing);}
thing.GameStarter.markChanged(thing);};GameStartr.prototype.setHeight=function(thing,height,updateSprite,updateSize){thing.height=height;thing.unitheight=height*thing.GameStarter.unitsize;if(updateSprite){thing.spriteheight=height;thing.spriteheightpixels=height*thing.GameStarter.unitsize;}
if(updateSize){thing.GameStarter.updateSize(thing);}
thing.GameStarter.markChanged(thing);};GameStartr.prototype.setSize=function(thing,width,height,updateSprite,updateSize){thing.GameStarter.setWidth(thing,width,updateSprite,updateSize);thing.GameStarter.setHeight(thing,height,updateSprite,updateSize);};GameStartr.prototype.updatePosition=function(thing){thing.GameStarter.shiftHoriz(thing,thing.xvel);thing.GameStarter.shiftVert(thing,thing.yvel);};GameStartr.prototype.updateSize=function(thing){thing.unitwidth=thing.width*thing.GameStarter.unitsize;thing.unitheight=thing.height*thing.GameStarter.unitsize;thing.spritewidthpixels=thing.spritewidth*thing.GameStarter.unitsize;thing.spriteheightpixels=thing.spriteheight*thing.GameStarter.unitsize;thing.canvas.width=thing.spritewidthpixels;thing.canvas.height=thing.spriteheightpixels;thing.GameStarter.PixelDrawer.setThingSprite(thing);thing.GameStarter.markChanged(thing);};GameStartr.prototype.reduceWidth=function(thing,dx,updateSize){thing.right-=dx;thing.width-=dx/thing.GameStarter.unitsize;if(updateSize){thing.GameStarter.updateSize(thing);}
else{thing.GameStarter.markChanged(thing);}};GameStartr.prototype.reduceHeight=function(thing,dy,updateSize){thing.top+=dy;thing.height-=dy/thing.GameStarter.unitsize;if(updateSize){thing.GameStarter.updateSize(thing);}
else{thing.GameStarter.markChanged(thing);}};GameStartr.prototype.increaseHeight=function(thing,dy,updateSize){thing.top-=dy;thing.height+=dy/thing.GameStarter.unitsize;thing.unitheight=thing.height*thing.GameStarter.unitsize;if(updateSize){thing.GameStarter.updateSize(thing);}
else{thing.GameStarter.markChanged(thing);}};GameStartr.prototype.increaseWidth=function(thing,dx,updateSize){thing.right+=dx;thing.width+=dx/thing.GameStarter.unitsize;thing.unitwidth=thing.width*thing.GameStarter.unitsize;if(updateSize){thing.GameStarter.updateSize(thing);}
else{thing.GameStarter.markChanged(thing);}};GameStartr.prototype.thingPauseVelocity=function(thing,keepMovement){thing.xvelOld=thing.xvel||0;thing.yvelOld=thing.yvel||0;thing.nofallOld=thing.nofall||false;thing.nocollideOld=thing.nocollide||false;thing.movementOld=thing.movement||thing.movementOld;thing.nofall=thing.nocollide=true;thing.xvel=thing.yvel=0;if(!keepMovement){thing.movement=undefined;}};GameStartr.prototype.thingResumeVelocity=function(thing,noVelocity){if(!noVelocity){thing.xvel=thing.xvelOld||0;thing.yvel=thing.yvelOld||0;}
thing.movement=thing.movementOld||thing.movement;thing.nofall=thing.nofallOld||false;thing.nocollide=thing.nocollideOld||false;};GameStartr.prototype.generateObjectKey=function(thing){return thing.GameStarter.MapsHandler.getArea().setting
+" "+thing.groupType+" "
+thing.title+" "+thing.className;};GameStartr.prototype.setClass=function(thing,className){thing.className=className;thing.GameStarter.PixelDrawer.setThingSprite(thing);thing.GameStarter.markChanged(thing);};GameStartr.prototype.setClassInitial=function(thing,className){thing.className=className;};GameStartr.prototype.addClass=function(thing,className){thing.className+=" "+className;thing.GameStarter.PixelDrawer.setThingSprite(thing);thing.GameStarter.markChanged(thing);};GameStartr.prototype.addClasses=function(thing){var classes=[];for(var _i=1;_i<arguments.length;_i++){classes[_i-1]=arguments[_i];}
var adder,i,j;for(i=0;i<classes.length;i+=1){adder=classes[i];if(adder.constructor===String||typeof adder==="string"){adder=adder.split(" ");}
for(j=adder.length-1;j>=0;j-=1){thing.GameStarter.addClass(thing,adder[j]);}}};GameStartr.prototype.removeClass=function(thing,className){if(!className){return;}
if(className.indexOf(" ")!==-1){thing.GameStarter.removeClasses(thing,className);}
thing.className=thing.className.replace(new RegExp(" "+className,"gm"),"");thing.GameStarter.PixelDrawer.setThingSprite(thing);};GameStartr.prototype.removeClasses=function(thing){var classes=[];for(var _i=1;_i<arguments.length;_i++){classes[_i-1]=arguments[_i];}
var adder,i,j;for(i=0;i<classes.length;i+=1){adder=classes[i];if(adder.constructor===String||typeof adder==="string"){adder=adder.split(" ");}
for(j=adder.length-1;j>=0;--j){thing.GameStarter.removeClass(thing,adder[j]);}}};GameStartr.prototype.hasClass=function(thing,className){return thing.className.indexOf(className)!==-1;};GameStartr.prototype.switchClass=function(thing,classNameOut,classNameIn){thing.GameStarter.removeClass(thing,classNameOut);thing.GameStarter.addClass(thing,classNameIn);};GameStartr.prototype.flipHoriz=function(thing){thing.flipHoriz=true;thing.GameStarter.addClass(thing,"flipped");};GameStartr.prototype.flipVert=function(thing){thing.flipVert=true;thing.GameStarter.addClass(thing,"flip-vert");};GameStartr.prototype.unflipHoriz=function(thing){thing.flipHoriz=false;thing.GameStarter.removeClass(thing,"flipped");};GameStartr.prototype.unflipVert=function(thing){thing.flipVert=false;thing.GameStarter.removeClass(thing,"flip-vert");};GameStartr.prototype.setOpacity=function(thing,opacity){thing.opacity=opacity;thing.GameStarter.markChanged(thing);};GameStartr.prototype.ensureCorrectCaller=function(current){if(!(current instanceof GameStartr)){throw new Error("A function requires the scope ('this') to be the "
+"manipulated GameStartr object. Unfortunately, 'this' is a "
+typeof(this)+".");}
return current;};GameStartr.prototype.arrayDeleteThing=function(thing,array,location){if(location===void 0){location=array.indexOf(thing);}
if(location===-1){return;}
array.splice(location,1);if(typeof(thing.onDelete)==="function"){thing.onDelete(thing);}};GameStartr.prototype.takeScreenshot=function(name,format){if(format===void 0){format="image/png";}
var GameStarter=GameStartr.prototype.ensureCorrectCaller(this),link=GameStarter.createElement("a",{"download":name+"."+format.split("/")[1],"href":GameStarter.canvas.toDataURL(format).replace(format,"image/octet-stream")});link.click();};GameStartr.prototype.addPageStyles=function(styles){var GameStarter=GameStartr.prototype.ensureCorrectCaller(this),sheet=GameStarter.createElement("style",{"type":"text/css"}),compiled="",i,j;for(i in styles){if(!styles.hasOwnProperty(i)){continue;}
compiled+=i+" { \r\n";for(j in styles[i]){if(styles[i].hasOwnProperty(j)){compiled+="  "+j+": "+styles[i][j]+";\r\n";}}
compiled+="}\r\n";}
if(sheet.styleSheet){sheet.style.cssText=compiled;}
else{sheet.appendChild(document.createTextNode(compiled));}
document.querySelector("head").appendChild(sheet);};return GameStartr;})(EightBittr.EightBittr);GameStartr_1.GameStartr=GameStartr;})(GameStartr||(GameStartr={}));